"use strict";(self.webpackChunktsdoc_org=self.webpackChunktsdoc_org||[]).push([[9012],{158:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(6393);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=l(n),d=r,g=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(g,s(s({ref:t},c),{},{components:n})):a.createElement(g,s({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[m]="string"==typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1206:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>m});var a=n(9122),r=n(2501),o=(n(6393),n(158)),s=["components"],i={title:"@microsoft/tsdoc"},p=void 0,l={unversionedId:"pages/packages/tsdoc",id:"pages/packages/tsdoc",title:"@microsoft/tsdoc",description:"NPM package",source:"@site/docs/pages/packages/tsdoc.md",sourceDirName:"pages/packages",slug:"/pages/packages/tsdoc",permalink:"/pages/packages/tsdoc",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/tsdoc.org/docs/pages/packages/tsdoc.md",tags:[],version:"current",frontMatter:{title:"@microsoft/tsdoc"},sidebar:"docsSidebar",previous:{title:"Project roadmap",permalink:"/pages/intro/roadmap"},next:{title:"@microsoft/tsdoc-config",permalink:"/pages/packages/tsdoc-config"}},c={},m=[{value:"Can&#39;t I just use a RegExp?",id:"cant-i-just-use-a-regexp",level:2},{value:"Invoking the TSDoc parser",id:"invoking-the-tsdoc-parser",level:2},{value:"Invoking the TSDoc parser",id:"invoking-the-tsdoc-parser-1",level:2}],u={toc:m},d="wrapper";function g(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@microsoft/tsdoc"},"NPM package"),(0,o.kt)("br",null),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/tsdoc/blob/main/tsdoc/CHANGELOG.md"},"CHANGELOG.md")),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"@microsoft/tsdoc")," package is the reference implementation of a parser for the TSDoc syntax.\nYou cannot use it directly. It is an engine component intended to be incorporated into\n",(0,o.kt)("a",{parentName:"p",href:"/pages/intro/using_tsdoc"},"other documentation tools"),"."),(0,o.kt)("p",null,"If you are implementing a tool that needs to extract information from TypeScript code comments,\n",(0,o.kt)("strong",{parentName:"p"},"@microsoft/tsdoc")," provides an easy solution that will correctly implement TSDoc."),(0,o.kt)("h2",{id:"cant-i-just-use-a-regexp"},"Can't I just use a RegExp?"),(0,o.kt)("p",null,"Suppose we are analyzing a TypeScript code comment such as this:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"input example 1:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * This API calculates the average of a list of numbers.\n *\n * @param list - the array of input numbers\n * @returns the arithmetic mean, or 0 if `list` is an empty array\n *\n * @internal\n */\n")),(0,o.kt)("p",null,"Let's say we're making a documentation tool, and we want to analyze whether this comment was tagged as ",(0,o.kt)("inlineCode",{parentName:"p"},"@internal"),".\nWe could forget about fancy parsers and do a simple test like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"function isApiInternal(docComment: string): boolean {\n  return docComment.indexOf('@internal') >= 0;\n}\n")),(0,o.kt)("p",null,"But we'll quickly notice some potential edge cases would not be detected correctly:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"input example 2:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * @internalDefault\n */\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"input example 3:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * For more information, please contact support@internalwebsite.com.\n */\n")),(0,o.kt)("p",null,"No problem! A regular expression can distinguish ",(0,o.kt)("inlineCode",{parentName:"p"},"@internal")," from words containing it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"function isApiInternal(docComment: string): boolean {\n  return /(^|\\s)@internal(\\s|$)/.test(docComment);\n}\n")),(0,o.kt)("p",null,"But TypeScript doc comments support many other syntaxes which are not so easy to handle.\nJumping straight to an advanced case, think about what the doc comment might look like for our\nown ",(0,o.kt)("inlineCode",{parentName:"p"},"isApiInternal()")," function. (If our documentation tool is any good, surely it should be able to\ndocument its own APIs!)"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"input example 4:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'/**\n * Returns `true` if a comment string contains the\n * {@link http://tsdoc.org/pages/tags/internal | @internal tag}.\n *\n * @example\n * ```ts\n * // Prints "true" if comment contains "@internal"\n * console.log(isApiInternal(input));\n * ```\n */\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"@internal")," substring appears twice in example 4, but neither of these usages was meant to designate\n",(0,o.kt)("inlineCode",{parentName:"p"},"isApiInternal()")," itself as being an internal API. The first case is inside a ",(0,o.kt)("inlineCode",{parentName:"p"},"{@link}")," tag, and the second case\nis inside an example code block. If you try to expand the RegExp, you will find that the edge cases quickly\nbecome insurmountable. (Regular expressions don't work because Markdown is not a\n",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Chomsky_hierarchy#The_hierarchy"},"regular language"),". It is not even a\ncontext-free grammar.)"),(0,o.kt)("p",null,"This leads to a couple insights:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"In order to correctly analyze doc comments, you need a proper parser"),(0,o.kt)("li",{parentName:"ul"},"Different parsers can disagree about a basic question like ",(0,o.kt)("em",{parentName:"li"},'"Is this API tagged as ',(0,o.kt)("inlineCode",{parentName:"em"},"@internal"),' or not?"'),"\nFor example, if a parser doesn't support ",(0,o.kt)("inlineCode",{parentName:"li"},"```")," code blocks, then it would misinterpret the above input.")),(0,o.kt)("h2",{id:"invoking-the-tsdoc-parser"},"Invoking the TSDoc parser"),(0,o.kt)("p",null,"Here's how we might implement ",(0,o.kt)("inlineCode",{parentName:"p"},"isApiInternal()")," using the ",(0,o.kt)("strong",{parentName:"p"},"@microsoft/tsdoc")," engine:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { TSDocParser, ParserContext } from '@microsoft/tsdoc';\n\nfunction isApiInternal(docComment: string): boolean {\n  const tsdocParser: TSDocParser = new TSDocParser();\n\n  // Analyze the input doc comment\n  const parserContext: ParserContext = tsdocParser.parseString(docComment);\n\n  // Check for any syntax errors\n  if (parserContext.log.messages.length > 0) {\n    throw new Error('Syntax error: ' + parserContext.log.messages[0].text);\n  }\n\n  // Since \"@internal\" is a standardized tag and a \"modifier\", it is automatically\n  // added to the modifierTagSet:\n  return parserContext.docComment.modifierTagSet.isInternal();\n}\n\nconst input: string = [\n  '/**',\n  ' * @ Returns `true` if a comment string contains the',\n  ' * {@link http://tsdoc.org/pages/tags/internal | @internal tag}.',\n  ' *',\n  ' * @example',\n  ' * ```ts',\n  ' * // Prints \"true\" if comment contains \"@internal\"',\n  ' * console.log(isApiInternal(input));',\n  ' * ```',\n  ' */'\n].join('\\n');\n\n// Prints \"false\" because the two \"@internal\" usages in our example are embedded\n// in other constructs, and thus should not be interpreted as tags.\nconsole.log(isApiInternal(input));\n")),(0,o.kt)("p",null,"The library provides a number of other nice features:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"It tracks source code coordinates for every input token. This enables precise error messages\nfor every token, and can be used to implement ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/tsdoc/blob/main/playground/src/SyntaxStyler/DocNodeSyntaxStyler.ts"},"syntax highlighting"),".")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"It provides an Abstract Syntax Tree that makes it easy\nto ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/tsdoc/blob/26c4bab8efb04bc5d1619585e1f071bcc10cf16a/playground/src/DocHtmlView.tsx#L140"},"render rich text"),"\nin other formats such as HTML")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The parser supports custom tags")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Error messages returned by the parser can be filtered, for example if you want to ignore warnings that are\nnot relevant to your scenario"))),(0,o.kt)("h2",{id:"invoking-the-tsdoc-parser-1"},"Invoking the TSDoc parser"),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/microsoft/tsdoc/tree/main/api-demo"},"api-demo folder"),' provides a more complete example.\nIt also contains an "advanced" example, illustrating how to interface TSDoc with the parse tree returned by\nthe TypeScript compiler engine.'))}g.isMDXComponent=!0}}]);